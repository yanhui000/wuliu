!function(o,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):o.H5loger=t()}(this,function(){"use strict";var o=function(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function o(o,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();return new(function(){function e(t){var n=t.host;o(this,e),this.host=n||"https://www.ymm56.com/h5log","static.ymm56.com"!=location.host&&"huodong.ymm56.com"!=location.host&&(this.host=""),this.hijack(),this.active()}return t(e,[{key:"config",value:function(o){var t=o.host;this.host=t||"https://www.ymm56.com/h5log"}},{key:"hijack",value:function(){console.log("检查劫持");var o=document.querySelectorAll('script[ymm="1"]').length;(document.querySelectorAll("iframe").length>0||o>0&&document.querySelectorAll("script").length!=o)&&this.log("hijack",{p:location.protocol.replace(":",""),path:location.pathname.replace("index.html",""),h:location.host})}},{key:"active",value:function(){console.log("访问记录"),this.log("active",{n:location.pathname.replace(/\//gi,"").replace("index.html","")})}},{key:"log",value:function(o,t){if(this.host){var e=new window.Image,n="_img_"+window.Math.random();window[n]=e,e.onload=e.onerror=function(){window[n]=null},t.type=o;var i=[];for(var c in t)i.push(c+"="+t[c]);i=i.join("&");var a=this.host+"?"+i;e.src=a}}}]),e}())({})});
